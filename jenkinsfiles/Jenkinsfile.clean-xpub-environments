elifePipeline {
    def pullRequests
    stage "Calculate old pull requests", {
        checkout scm
        // ["902", ...]
        def oldPullRequest = jenkinsCli("groovy = <jenkinsfiles/old-pull-requests.groovy elife-xpub").trim().split("\n")
    }

    stage "Delete Helm releases", {
        // ["elife-xpub--pr-902", ...]
        def releases = sh(script: "helm ls elife-xpub-- --output json | jq -r '.Releases[].Name'", returnStdout: false).trim().split("\n")
        for (pr in oldPullRequest) {
            println(pr) 
        }
    }
}
